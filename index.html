<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Firebaseチャット</title><style>body{font-family:Arial,sans-serif;margin:0;padding:0;display:flex;flex-direction:column;height:100vh;}#chat-container{flex:1;overflow-y:auto;padding:20px;border-bottom:1px solid #ddd;}#message-form{display:flex;padding:10px;border-top:1px solid #ddd;}#message-input{flex:1;padding:10px;font-size:16px;border:1px solid #ddd;border-radius:4px;margin-right:10px;}#send-button{padding:10px 20px;font-size:16px;border:none;border-radius:4px;background-color:#28a745;color:white;cursor:pointer;}#name-container{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:1000;}#name-form{background-color:white;padding:20px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.1);text-align:center;}#name-input{padding:10px;font-size:16px;border:1px solid #ddd;border-radius:4px;width:calc(100% - 22px);margin-bottom:10px;}#save-name-button{padding:10px 20px;font-size:16px;border:none;border-radius:4px;background-color:#007bff;color:white;cursor:pointer;}</style> <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script></head><body><div id="chat-container"></div><form id="message-form"> <input type="text" id="message-input" placeholder="メッセージを入力してください"> <button type="submit" id="send-button">送信</button> </form><div id="name-container"><form id="name-form"> <input type="text" id="name-input" placeholder="名前を入力してください"> <button type="button" id="save-name-button">保存</button> </form></div><script>const firebaseConfig={apiKey:"AIzaSyAxFGXTPIp9HU7P3Jv9latfa_fZEb1anQ0",authDomain:"jjjjjjjjjjjjjjjj-d7ea6.firebaseapp.com",databaseURL:"https://jjjjjjjjjjjjjjjj-d7ea6-default-rtdb.firebaseio.com",projectId:"jjjjjjjjjjjjjjjj-d7ea6",storageBucket:"jjjjjjjjjjjjjjjj-d7ea6.appspot.com",messagingSenderId:"47669496508",appId:"1:47669496508:web:f2bb829d8811bd5f2f5eb9",measurementId:"G-MSNB77FVP5"};firebase.initializeApp(firebaseConfig);const database=firebase.database();document.addEventListener("DOMContentLoaded",function(){const chatContainer=document.getElementById("chat-container");const messageForm=document.getElementById("message-form");const messageInput=document.getElementById("message-input");const nameContainer=document.getElementById("name-container");const nameForm=document.getElementById("name-form");const nameInput=document.getElementById("name-input");const saveNameButton=document.getElementById("save-name-button");function g(b,e,a){const d=new Date();d.setTime(d.getTime()+(a*24*60*60*1000));const expires="expires="+d.toUTCString();document.cookie=b+"="+e+";"+expires+";path=/"}function f(a){const nameEQ=a+"=";const ca=document.cookie.split(';');for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null}let userName=f("username");if(!userName){nameContainer.style.display="flex"}else{nameContainer.style.display="none"}saveNameButton.addEventListener("click",function(){userName=nameInput.value.trim();if(userName){g("username",userName,365);nameContainer.style.display="none"}});database.ref("messages").on("child_added",function(a){const messageData=a.val();const messageElement=document.createElement("div");messageElement.textContent=messageData.name+": "+messageData.message;chatContainer.appendChild(messageElement);chatContainer.scrollTop=chatContainer.scrollHeight});database.ref("messages").on("child_removed",function(){chatContainer.innerHTML=""});messageForm.addEventListener("submit",function(a){a.preventDefault();const message=messageInput.value.trim();if(message==="/c"){database.ref("messages").remove()}else if(message){database.ref("messages").push({name:userName,message:message})}messageInput.value=""})});</script></body></html>
